<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI 顔診断</title>

<style>
body {
  background: linear-gradient(135deg,#0f172a,#1e293b);
  color:#fff;
  font-family: system-ui;
  text-align:center;
  padding:30px;
}
.card {
  max-width:420px;
  margin:auto;
  background:rgba(255,255,255,0.08);
  padding:20px;
  border-radius:16px;
}
button {
  font-size:18px;
  padding:12px 24px;
  border-radius:12px;
  border:none;
  background:#6366f1;
  color:#fff;
}
img {
  max-width:100%;
  margin-top:15px;
  border-radius:12px;
}
</style>
</head>

<body>
<h1>AI 顔診断</h1>

<div class="card">
  <input type="file" id="file" accept="image/*"><br><br>
  <button onclick="send()">診断する</button>

  <img id="preview" style="display:none;">
  <div id="result"></div>
</div>

<script>
function send() {
  const file = document.getElementById("file").files[0];
  if (!file) return alert("画像選んで");

  const reader = new FileReader();
  reader.onload = function () {
    document.getElementById("preview").src = reader.result;
    document.getElementById("preview").style.display = "block";

    const score = Math.floor(70 + Math.random() * 25);
    const rank = score >= 90 ? "S" : score >= 80 ? "A" : "B";

    document.getElementById("result").innerHTML =
      `黄金比：<b>${score}%</b><br>ランク：<b>${rank}</b>`;

    fetch("/.netlify/functions/send", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ score, rank })
    });
  };
  reader.readAsDataURL(file);
}
</script>
</body>
</html>
